-- Clear existing districts and add all districts/oblasts of Kazakhstan
DELETE FROM public.user_district_participation;
DELETE FROM public.challenge_activities;
DELETE FROM public.districts;

-- Insert all administrative regions (oblasts) and cities of Kazakhstan
INSERT INTO public.districts (name, city) VALUES
-- Cities of republican significance
('Алмалинский район', 'Алматы'),
('Ауэзовский район', 'Алматы'),
('Бостандыкский район', 'Алматы'),
('Жетысуский район', 'Алматы'),
('Медеуский район', 'Алматы'),
('Наурызбайский район', 'Алматы'),
('Турксибский район', 'Алматы'),
('Алатауский район', 'Алматы'),

('Алматы район', 'Астана'),
('Байконыр район', 'Астана'),
('Есильский район', 'Астана'),
('Нура район', 'Астана'),
('Сарыарка район', 'Астана'),

('Абайский район', 'Шымкент'),
('Аль-Фарабийский район', 'Шымкент'),
('Енбекшинский район', 'Шымкент'),
('Каратауский район', 'Шымкент'),

-- Акмолинская область
('Аккольский район', 'Акмолинская область'),
('Аршалынский район', 'Акмолинская область'),
('Астраханский район', 'Акмолинская область'),
('Атбасарский район', 'Акмолинская область'),
('Биржан сал район', 'Акмолинская область'),
('Буландынский район', 'Акмолинская область'),
('Бурабайский район', 'Акмолинская область'),
('Егіндыкөльский район', 'Акмолинская область'),
('Ерейментауский район', 'Акмолинская область'),
('Есильский район', 'Акмолинская область'),
('Жаксынский район', 'Акмолинская область'),
('Жаркаинский район', 'Акмолинская область'),
('Зерендинский район', 'Акмолинская область'),
('Коргалжынский район', 'Акмолинская область'),
('Сандыктауский район', 'Акмолинская область'),
('Целиноградский район', 'Акмолинская область'),
('Шортандинский район', 'Акмолинская область'),

-- Актюбинская область
('Айтекебийский район', 'Актюбинская область'),
('Алгинский район', 'Актюбинская область'),
('Байганинский район', 'Актюбинская область'),
('Иргизский район', 'Актюбинская область'),
('Каргалинский район', 'Актюбинская область'),
('Кобдинский район', 'Актюбинская область'),
('Мартукский район', 'Актюбинская область'),
('Мугалжарский район', 'Актюбинская область'),
('Темирский район', 'Актюбинская область'),
('Уилский район', 'Актюбинская область'),
('Хромтауский район', 'Актюбинская область'),
('Шалкарский район', 'Актюбинская область'),

-- Алматинская область
('Балхашский район', 'Алматинская область'),
('Енбекшиказахский район', 'Алматинская область'),
('Ескельдинский район', 'Алматинская область'),
('Жамбылский район', 'Алматинская область'),
('Илийский район', 'Алматинская область'),
('Карасайский район', 'Алматинская область'),
('Каратальский район', 'Алматинская область'),
('Кегенский район', 'Алматинская область'),
('Коксуский район', 'Алматинская область'),
('Панфиловский район', 'Алматинская область'),
('Райымбекский район', 'Алматинская область'),
('Саркандский район', 'Алматинская область'),
('Талгарский район', 'Алматинская область'),
('Уйгурский район', 'Алматинская область'),

-- Атырауская область
('Жылыойский район', 'Атырауская область'),
('Индерский район', 'Атырауская область'),
('Исатайский район', 'Атырауская область'),
('Кызылкогинский район', 'Атырауская область'),
('Курмангазинский район', 'Атырауская область'),
('Макатский район', 'Атырауская область'),
('Махамбетский район', 'Атырауская область'),

-- Западно-Казахстанская область
('Акжаикский район', 'Западно-Казахстанская область'),
('Бокейординский район', 'Западно-Казахстанская область'),
('Бурлинский район', 'Западно-Казахстанская область'),
('Жангалинский район', 'Западно-Казахстанская область'),
('Жанибекский район', 'Западно-Казахстанская область'),
('Казталовский район', 'Западно-Казахстанская область'),
('Каратобинский район', 'Западно-Казахстанская область'),
('Сырымский район', 'Западно-Казахстанская область'),
('Таскалинский район', 'Западно-Казахстанская область'),
('Теректинский район', 'Западно-Казахстанская область'),
('Чингирлауский район', 'Западно-Казахстанская область'),

-- Жамбылская область
('Байзакский район', 'Жамбылская область'),
('Жамбылский район', 'Жамбылская область'),
('Жуалынский район', 'Жамбылская область'),
('Кордайский район', 'Жамбылская область'),
('Меркенский район', 'Жамбылская область'),
('Мойынкумский район', 'Жамбылская область'),
('Сарысуский район', 'Жамбылская область'),
('Таласский район', 'Жамбылская область'),
('Турар Рыскуловский район', 'Жамбылская область'),
('Шуский район', 'Жамбылская область'),

-- Карагандинская область
('Абайский район', 'Карагандинская область'),
('Актогайский район', 'Карагандинская область'),
('Бухар-Жырауский район', 'Карагандинская область'),
('Каркаралинский район', 'Карагандинская область'),
('Нуринский район', 'Карагандинская область'),
('Осакаровский район', 'Карагандинская область'),
('Улытауский район', 'Карагандинская область'),
('Шетский район', 'Карагандинская область'),

-- Костанайская область
('Алтынсаринский район', 'Костанайская область'),
('Амангельдинский район', 'Костанайская область'),
('Аулиекольский район', 'Костанайская область'),
('Денисовский район', 'Костанайская область'),
('Джангельдинский район', 'Костанайская область'),
('Житикаринский район', 'Костанайская область'),
('Камыстинский район', 'Костанайская область'),
('Карабалыкский район', 'Костанайская область'),
('Карасуский район', 'Костанайская область'),
('Костанайский район', 'Костанайская область'),
('Мендыкаринский район', 'Костанайская область'),
('Наурзумский район', 'Костанайская область'),
('Сарыкольский район', 'Костанайская область'),
('Тарановский район', 'Костанайская область'),
('Узункольский район', 'Костанайская область'),
('Федоровский район', 'Костанайская область'),

-- Кызылординская область
('Аральский район', 'Кызылординская область'),
('Жалагашский район', 'Кызылординская область'),
('Жанакорганский район', 'Кызылординская область'),
('Казалинский район', 'Кызылординская область'),
('Кармакшинский район', 'Кызылординская область'),
('Сырдарьинский район', 'Кызылординская область'),
('Шиелинский район', 'Кызылординская область'),

-- Мангистауская область
('Бейнеуский район', 'Мангистауская область'),
('Каракиянский район', 'Мангистауская область'),
('Мангистауский район', 'Мангистауская область'),
('Мунайлинский район', 'Мангистауская область'),
('Тупкараганский район', 'Мангистауская область'),

-- Павлодарская область
('Аккулинский район', 'Павлодарская область'),
('Актогайский район', 'Павлодарская область'),
('Баянаульский район', 'Павлодарская область'),
('Железинский район', 'Павлодарская область'),
('Иртышский район', 'Павлодарская область'),
('Качирский район', 'Павлодарская область'),
('Лебяжинский район', 'Павлодарская область'),
('Майский район', 'Павлодарская область'),
('Павлодарский район', 'Павлодарская область'),
('Успенский район', 'Павлодарская область'),
('Щербактинский район', 'Павлодарская область'),

-- Северо-Казахстанская область
('Айыртауский район', 'Северо-Казахстанская область'),
('Акжарский район', 'Северо-Казахстанская область'),
('Аккайынский район', 'Северо-Казахстанская область'),
('Есильский район', 'Северо-Казахстанская область'),
('Жамбылский район', 'Северо-Казахстанская область'),
('Кызылжарский район', 'Северо-Казахстанская область'),
('Магжан Жумабаев район', 'Северо-Казахстанская область'),
('Мамлютский район', 'Северо-Казахстанская область'),
('Таиыншинский район', 'Северо-Казахстанская область'),
('Тимирязевский район', 'Северо-Казахстанская область'),
('Уалихановский район', 'Северо-Казахстанская область'),
('Шал Акын район', 'Северо-Казахстанская область'),

-- Туркестанская область
('Арысский район', 'Туркестанская область'),
('Байдибекский район', 'Туркестанская область'),
('Жетысайский район', 'Туркестанская область'),
('Казыгуртский район', 'Туркестанская область'),
('Келесский район', 'Туркестанская область'),
('Мактааральский район', 'Туркестанская область'),
('Ордабасинский район', 'Туркестанская область'),
('Отырарский район', 'Туркестанская область'),
('Сайрамский район', 'Туркестанская область'),
('Сарыагашский район', 'Туркестанская область'),
('Созакский район', 'Туркестанская область'),
('Толебийский район', 'Туркестанская область'),
('Тюлькубасский район', 'Туркестанская область'),
('Шардаринский район', 'Туркестанская область'),

-- Восточно-Казахстанская область
('Абайский район', 'Восточно-Казахстанская область'),
('Аягозский район', 'Восточно-Казахстанская область'),
('Бескарагайский район', 'Восточно-Казахстанская область'),
('Бородулихинский район', 'Восточно-Казахстанская область'),
('Глубоковский район', 'Восточно-Казахстанская область'),
('Жарминский район', 'Восточно-Казахстанская область'),
('Зайсанский район', 'Восточно-Казахстанская область'),
('Катонкарагайский район', 'Восточно-Казахстанская область'),
('Кокпектинский район', 'Восточно-Казахстанская область'),
('Курчумский район', 'Восточно-Казахстанская область'),
('Тарбагатайский район', 'Восточно-Казахстанская область'),
('Уланский район', 'Восточно-Казахстанская область'),
('Урджарский район', 'Восточно-Казахстанская область'),
('Шемонаихинский район', 'Восточно-Казахстанская область'),

-- Абайская область (новая)
('Аксуатский район', 'Абайская область'),
('Аягозский район', 'Абайская область'),
('Бескарагайский район', 'Абайская область'),
('Жанасемейский район', 'Абайская область'),
('Кокпектинский район', 'Абайская область'),

-- Жетысуская область (новая)
('Аксуский район', 'Жетысуская область'),
('Алакольский район', 'Жетысуская область'),
('Ескельдинский район', 'Жетысуская область'),
('Каратальский район', 'Жетысуская область'),
('Кербулакский район', 'Жетысуская область'),
('Коксуский район', 'Жетысуская область'),
('Панфиловский район', 'Жетысуская область'),
('Саркандский район', 'Жетысуская область'),

-- Улытауская область (новая)
('Жанааркинский район', 'Улытауская область'),
('Улытауский район', 'Улытауская область'),
('Шетский район', 'Улытауская область');

-- Update ranks based on total_score
UPDATE public.districts SET current_rank = subq.rank
FROM (
  SELECT id, ROW_NUMBER() OVER (ORDER BY total_score DESC) as rank
  FROM public.districts
) as subq
WHERE districts.id = subq.id;